<!DOCTYPE html>
<html>
    <head>
        <title>BC GAME JAM</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="assets/styles.css" text="text/css"/>
    </head>
    <body onload="startGame()">
      <div class="menu">
        <div class="start">
          <p>Start</p>
        </div>
        <img class="menuImg" src="assets/Background/animation/bg_1.png" alt="start background">
        <!-- <img class="trainer" src="assets/trainer_1.png" alt="mean trainer"> -->

      </div>
      <script src="assets/js/jquery-3.3.1.min.js"></script>
      <script src="assets/js/objects.js"></script>
      <script src="assets/js/variables.js"></script>
      <script src="assets/js/component.js"></script>
      <script src="assets/js/menu_animation.js"></script>
      <script src="assets/js/update.js"></script>
      <script src="assets/js/main.js"></script>
        <script>

            // var constEnergyLoss = 2;

            // var objects = [
            //     {
            //         type: "apple",
            //         src: "assets/apple.png",
            //         energy: 15
            //     },
            //     {
            //         type: "carrot",
            //         src: "assets/carrot.png",
            //         energy: 10
            //     },
            //     {
            //         type: "fish",
            //         src: "assets/fish.png",
            //         energy: 20
            //     },
            //     {
            //         type: "steak",
            //         src: "assets/steak.png",
            //         energy: 25
            //     }
            // ]

            // objects.forEach(function(item) {
            //     var i = document.createElement("IMG");
            //     i.setAttribute("src", item.src);
            //     i.setAttribute("id", item.type);
            //     document.body.appendChild(i);
            // });

            // // load teddy image
            // var i = document.createElement("IMG");
            // i.setAttribute("src", "assets/Ted_1.png");
            // i.setAttribute("id", "ted");
            // document.body.appendChild(i);
            // var tedImg = document.getElementById("ted");

            // // load background image
            // var j = document.createElement("IMG");
            // j.setAttribute("src", "assets/bg_1.png");
            // j.setAttribute("id", "bg");
            // document.body.appendChild(j);
            // var bg = document.getElementById("bg");

            
            // var food;
            // var player;
            // var pointCounter;
            // var strength;
            // var isChinUp;
            // var chinInterval;

            // var counter = 0;
            // var currEnergy = -100;
            // var constEnergyLoss = 0.2;
            // var currStrength = -100;
            // var strengthLoss = 0.1;

            // // health bar
            // const BAR_WIDTH = 20;
            // const BAR_X = 10;
            // const BAR_Y = 110;
            // const MAX_ENERGY = -100;
            // const ENERGY_LOSS = 5;
            // const chinUpDist = 100;
            // const STRENGTH_GAIN = 2.0;

            // // game states
            // const MAIN_MENU = 0;
            // const PLAY = 1;
            // const END = 2;
            // var state = MAIN_MENU;

            // var alive = true;

            // const BUTTON_INTERVAL = 16;

            // var bg_music = new Audio('Podington_Bear_-_Funk.mp3').play();

            // function getRandomInt(max) {
            //     return Math.floor(Math.random() * Math.floor(max));
            // }

            // function getRandomRange(min, max) {
            //   return Math.floor(Math.random() * max) + min;
            // }

            // function startGame() {
            //     food = new component(30, 30, "red", 0, 0, "food");
            //     player = new component(0, 0, "blue", 414/7, 245, "player");
            //     healthBar = new component(BAR_WIDTH, currEnergy, "blue", BAR_X, BAR_Y, "healthBar");
            //     strength = new component(BAR_WIDTH, currStrength, "red", 40, BAR_Y, "strength");
            //     pointCounter = new component(0,0, "blue", 150, 400, "pointCounter");
            //     isChinUp = false;
            //     chinInterval = 0;

            //     myGameArea.start();
            // }

            // var myGameArea = {
            //     canvas : document.createElement("canvas"),
            //     start : function() {
            //         this.canvas.width = 414;
            //         this.canvas.height = 736;
            //         this.context = this.canvas.getContext("2d");
            //         document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            //         this.frameNo = 0;
            //         this.interval = setInterval(updateGameArea, 20);
            //         window.addEventListener('keydown', function (e) {
            //             e.preventDefault();
            //             myGameArea.keys = (myGameArea.keys || []);
            //             myGameArea.keys[e.keyCode] = (e.type == "keydown");
            //         })
            //         window.addEventListener('keyup', function (e) {
            //             myGameArea.keys[e.keyCode] = (e.type == "keydown");
            //         })

            //     },
            //     stop : function() {
            //         clearInterval(this.interval);
            //     },
            //     clear : function() {
            //         this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            //     }
            // }

            // function component(width, height, color, x, y, type) {
            //     this.type = type;
            //     this.width = width;
            //     this.height = height;
            //     this.speed = 3;
            //     this.angle = 0;
            //     this.x = x;
            //     this.y = y;
            //     this.foodNum = getRandomInt(4);
            //     this.update = function() {
            //         ctx = myGameArea.context;
            //         ctx.save();
            //           if(type == "food") {
            //               this.energyGain = objects[this.foodNum].energy;
            //               ctx.translate(this.x, this.y);
            //               var img = document.getElementById(objects[this.foodNum].type);
            //               ctx.drawImage(img, 10, 10);
            //           } else if (type == "player") {
            //               ctx.translate(this.x, this.y);
            //             //   var tedImg = document.getElementById("ted");
            //               ctx.drawImage(tedImg, 0, 0, tedImg.width, tedImg.height);
            //           } else if (type == "healthBar") {
            //               ctx.fillStyle = color;
            //               ctx.strokeRect(this.x, this.y, BAR_WIDTH, MAX_ENERGY);
            //               ctx.fillRect(this.x, this.y, BAR_WIDTH, currEnergy);
            //           } else if(type == "pointCounter") {
            //               ctx.font="40px Arial";
            //               ctx.fillText("Points: " + counter, x, y);
            //           } else if (type == "strength") {
            //               ctx.fillStyle = color;
            //               ctx.strokeRect(this.x, this.y, BAR_WIDTH, MAX_ENERGY);
            //             ctx.fillRect(this.x, this.y, BAR_WIDTH, currStrength);
            //           }


            //         ctx.restore();
            //     }
            //     this.newPos = function(time) {
            //       if (state == PLAY) {
            //         this.y += this.speed * Math.sin(this.angle)
            //         this.x += this.speed * Math.cos(this.angle);
            //       }

            //     }
            // }

            // function updateGameArea() {
            //   // console.log(state);
            //   // console.log(isChinUp);
            //   // console.log(currEnergy);
            //   if (state == MAIN_MENU) {
            //     $(".menu").show();
            //     $(".start").click(function() {
            //       $(".menu").hide();
            //       state = PLAY;
            //     });
            //   }

            //   if (!alive) {
            //     console.log("dead");
            //     state = MAIN_MENU;
            //     isChinUp = false;
            //     currEnergy = MAX_ENERGY;
            //     alive = true;
            //     // state = MAIN_MENU;
            //   }

            //   if (state == PLAY) {
            //     myGameArea.clear();
            //     player.angle = 0;
            //     player.speed = 0;
            //     if (food.x >= 480) {
            //         food.foodNum = getRandomInt(4);
            //         food.x = 0;
            //     }
                  
            //     if(chinInterval > BUTTON_INTERVAL && (myGameArea.keys && myGameArea.keys[38])) {
                    
            //         if(currStrength <= -100 || isChinUp) {
            //             if (isChinUp) { // going down
            //                 // player.y += chinUpDist;
            //                 document.getElementById("ted").src= "assets/Teddy/Ted_0.png"; // change ted image

            //                 isChinUp = false;
            //                 currStrength = 0;
            //             } else { // going up
            //                 // player.y -= chinUpDist;
            //                 document.getElementById("ted").src= "assets/Teddy/Ted_1.png";
            //                 currStrength = 0;
            //                 counter++;
            //                 isChinUp = true;
            //                 currEnergy += ENERGY_LOSS;
            //                 var grunt = new Audio('grunt.mp3').play();
            //             }
            //             chinInterval = 0;
            //         }
            //     }
                  
            //       //pressing spacebar rejuvinates strength
            //     if(myGameArea.keys && myGameArea.keys[32]) {
            //         if (currStrength <= -100) {
            //             currStrength = -100;
            //         }
            //         if (!isChinUp) {
            //             currStrength -= STRENGTH_GAIN;
            //         }
            //     }

            //     if (alive) {
            //         currEnergy += constEnergyLoss;
            //     }

            //     if (currEnergy > 0) {
            //         currEnergy = 0;
            //         alive = false;
            //         myGameArea.stop();
            //     }

            //     if (isChinUp && (food.x > 210 && food.x < 255)) {
            //         if (currEnergy - food.energyGain >= MAX_ENERGY) {
            //             currEnergy -= food.energyGain;
            //         } else {
            //             currEnergy = MAX_ENERGY;
            //         }
            //         food.foodNum = getRandomInt(4);
            //         food.x = 0;
            //         console.log("score");
            //     }
            //     player.update();
            //     food.newPos();
            //     food.update();
            //     healthBar.update();
            //       strength.update();
            //       pointCounter.update();
            //     chinInterval++;
            //   }
            // }

            // var $element = $('.menuImg');
            // var imagePath = 'assets/';
            // var totalFrames = 8;
            // var animationDuration = 500;
            // var timePerFrame = animationDuration / totalFrames;
            // var timeWhenLastUpdate = void 0;
            // var timeFromLastUpdate = void 0;
            // var frameNumber = 1;

            // // 'step' function will be called each time browser rerender the content
            // // we achieve that by passing 'step' as a parameter to the 'requestAnimationFrame' function
            // function step(startTime) {
            //   // 'startTime' is provided by requestAnimationName function, and we can consider it as current time
            //   // first of all we calculate how much time has passed from the last time when frame was update
            //   if (!timeWhenLastUpdate) timeWhenLastUpdate = startTime;
            //   timeFromLastUpdate = startTime - timeWhenLastUpdate;

            //   // then we check if it is time to update the frame
            //   if (timeFromLastUpdate > timePerFrame) {
            //     // and update it accordingly
            //     $element.attr('src', imagePath + ('/Background/animation/bg_' + frameNumber + '.png'));
            //     // reset the last update time
            //     timeWhenLastUpdate = startTime;

            //     // then increase the frame number or reset it if it is the last frame
            //     if (frameNumber >= totalFrames) {
            //       frameNumber = 1;
            //     } else {
            //       frameNumber = frameNumber + 1;
            //     }
            //   }

            //   requestAnimationFrame(step);
            // }

            // // create a set of hidden divs
            // // and set their background-image attribute to required images
            // // that will force browser to download the images
            // $(document).ready(function () {
            //   for (var i = 1; i < totalFrames + 1; i++) {
            //     $('body').append('<div id="preload-image-' + i + '" style="background-image: url(\'' + imagePath + '/Background/animation/bg_' + i + '.png\');"></div>');
            //   }
            // });

            // // wait for images to be downloaded and start the animation
            // $(window).on('load', function () {
            //   requestAnimationFrame(step);
            // });

            // // var $element = $('.trainer');
            // // var imagePath = 'assets/';
            // // var totalFrames = 7;
            // // var animationDuration = 1000;
            // // var timePerFrame = animationDuration / totalFrames;
            // // var timeWhenLastUpdate = void 0;
            // // var timeFromLastUpdate = void 0;
            // // var frameNumber = 1;
            // //
            // // // 'step' function will be called each time browser rerender the content
            // // // we achieve that by passing 'step' as a parameter to the 'requestAnimationFrame' function
            // // function step(startTime) {
            // //   // 'startTime' is provided by requestAnimationName function, and we can consider it as current time
            // //   // first of all we calculate how much time has passed from the last time when frame was update
            // //   if (!timeWhenLastUpdate) timeWhenLastUpdate = startTime;
            // //   timeFromLastUpdate = startTime - timeWhenLastUpdate;
            // //
            // //   // then we check if it is time to update the frame
            // //   if (timeFromLastUpdate > timePerFrame) {
            // //     // and update it accordingly
            // //     $element.attr('src', imagePath + ('/trainer_' + frameNumber + '.png'));
            // //     // reset the last update time
            // //     timeWhenLastUpdate = startTime;
            // //
            // //     // then increase the frame number or reset it if it is the last frame
            // //     if (frameNumber >= totalFrames) {
            // //       frameNumber = 1;
            // //     } else {
            // //       frameNumber = frameNumber + 1;
            // //     }
            // //   }
            // //
            // //   requestAnimationFrame(step);
            // // }
            // //
            // // // create a set of hidden divs
            // // // and set their background-image attribute to required images
            // // // that will force browser to download the images
            // // $(document).ready(function () {
            // //   for (var i = 1; i < totalFrames + 1; i++) {
            // //     $('body').append('<div id="preload-image-' + i + '" style="background-image: url(\'' + imagePath + 'trainer_' + i + '.png\');"></div>');
            // //   }
            // // });
            // //
            // // // wait for images to be downloaded and start the animation
            // // $(window).on('load', function () {
            // //   requestAnimationFrame(step);
            // // });
        </script>
    </body>

</html>
